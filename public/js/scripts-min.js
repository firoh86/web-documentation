"use strict";var menuNoRepeat,menu=document.getElementById("menu");addEventListener("load",function(){var e;(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("GET","/getMenus"),e.addEventListener("load",function(e){var t=JSON.parse(e.target.response),n=document.createDocumentFragment(),a=!0,r=!1,o=void 0;try{for(var s,i=t[0][Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var c=s.value,d=document.createElement("LI");d.dataset.id=c.id,d.classList.add("menu__item");var l=document.createElement("SPAN");l.textContent=c.title,l.classList.add("menu__text"),d.append(l);var u=document.createElement("UL");0==t[0].indexOf(c)&&u.classList.add("submenu--show"),u.classList.add("menu","submenu"),u.dataset.id=c.id,d.append(u),n.append(d);var m=!0,p=!1,v=void 0;try{for(var f,g=t[1][Symbol.iterator]();!(m=(f=g.next()).done);m=!0){var y=f.value;if(y.menu_id==c.id){var L=document.createElement("LI");L.textContent=y.title,L.dataset.id=y.id,L.classList.add("submenu__item"),u.append(L)}}}catch(e){p=!0,v=e}finally{try{m||null==g.return||g.return()}finally{if(p)throw v}}}}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}menu.append(n)}),e.send()}),menu.addEventListener("click",function(e){var t,n=e.target;if(navigateTarget(n),e.target.classList.contains("menu__item"))t=e.target.children[1],getContent(t.dataset.id);else{if(!e.target.classList.contains("menu__text")||e.target.classList.contains("menu"))return;t=e.target.nextElementSibling,getContent(t.dataset.id)}if(!e.target.classList.contains("submenu__item")){Array.from(document.querySelectorAll(".submenu")).map(function(e){return e.classList.remove("submenu--show")});var a=26*t.children.length;document.documentElement.style.setProperty("--submenu-height",a+"px"),t.classList.add("submenu--show")}});var main=document.getElementById("main"),getContent=function(e){var t;(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("GET","/getContent/".concat(e)),t.addEventListener("load",function(e){var t=JSON.parse(e.target.response);main.innerHTML=t[0].text,inyectaStyle()}),t.send()},inyectaStyle=function(){var e=document.getElementById("inyeccion");if(e){e.parentNode.removeChild(e),console.log(e+"borrado");var t=document.createElement("script");t.src="js/prism.js",t.id="inyeccion",document.body.appendChild(t),console.log("creado")}else{var n=document.createElement("script");n.src="js/prism.js",n.id="inyeccion",document.body.appendChild(n),console.log("creado")}},navigateTarget=function(t){if(t.classList.contains("submenu__item")){var e=Array.from(main.querySelectorAll("h2")).filter(function(e){return e.textContent.toLowerCase().startsWith(t.textContent.toLowerCase())})[0];scrollTo(0,e.offsetTop-110)}else scrollTo(0,-110)};getContent(1);