"use strict";var form=document.getElementById("form"),title=document.getElementById("title"),sectionTitle=document.getElementById("section-title"),sectionParagraph=document.getElementById("section-paragraph"),codeParagraph=document.getElementById("code-paragraph"),preview=document.getElementById("preview"),titleButton=document.getElementById("title-button"),sectionTitleButton=document.getElementById("section-title-button"),sectionParagraphButton=document.getElementById("section-paragraph-button"),codeParagraphButton=document.getElementById("code-paragraph-button"),buttonInsert=document.getElementById("submitForm"),finalTitle=[],sectionTitles=[],completDocument=[];form&&(form.addEventListener("submit",function(e){e.preventDefault()}),titleButton.addEventListener("click",function(e){preview.innerHTML="<h1>".concat(title.value,"</h1>"),completDocument[0]="<h1>".concat(title.value,"</h1>"),finalTitle[0]="<h1>".concat(title.value,"</h1>"),title.value=""}),sectionTitleButton.addEventListener("click",function(e){preview.innerHTML+="<h2>".concat(sectionTitle.value,"</h2>"),sectionTitles.push("<h2>".concat(sectionTitle.value,"</h2>")),completDocument.push("<h2>".concat(sectionTitle.value,"</h2>")),sectionTitle.value=""}),sectionParagraphButton.addEventListener("click",function(e){preview.innerHTML+="<p>".concat(sectionParagraph.value,"</p>"),completDocument.push("<p>".concat(sectionParagraph.value,"</p>")),sectionParagraph.value=""}),codeParagraphButton.addEventListener("click",function(e){preview.innerHTML+="<pre><code class='language-css'>".concat(codeParagraph.value,"</code></pre>"),completDocument.push("<pre><code class='language-css'>".concat(codeParagraph.value,"</code></pre>")),codeParagraph.value=""}),buttonInsert.addEventListener("click",function(e){console.log("boton correcto"),sendInfo(finalTitle,sectionTitles,completDocument)}));var menuNoRepeat,sendInfo=function(e,t,n){var a,o={titles:e,sections:t,completDoc:n};(a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("POST","/insertContent",!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(JSON.stringify(o))},menu=document.getElementById("menu");if(menu){addEventListener("load",function(){var e;(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("GET","/getMenus"),e.addEventListener("load",function(e){var t=JSON.parse(e.target.response),n=document.createDocumentFragment(),a=!0,o=!1,i=void 0;try{for(var c,r=t[0][Symbol.iterator]();!(a=(c=r.next()).done);a=!0){var s=c.value,l=document.createElement("LI");l.dataset.id=s.id,l.classList.add("menu__item");var u=document.createElement("SPAN");u.textContent=s.title,u.classList.add("menu__text"),l.append(u);var d=document.createElement("UL");0==t[0].indexOf(s)&&d.classList.add("submenu--show"),d.classList.add("menu","submenu"),d.dataset.id=s.id,l.append(d),n.append(l);var m=!0,p=!1,v=void 0;try{for(var g,f=t[1][Symbol.iterator]();!(m=(g=f.next()).done);m=!0){var h=g.value;if(h.menu_id==s.id){var y=document.createElement("LI");y.textContent=h.title,y.dataset.id=h.id,y.classList.add("submenu__item"),d.append(y)}}}catch(e){p=!0,v=e}finally{try{m||null==f.return||f.return()}finally{if(p)throw v}}}}catch(e){o=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(o)throw i}}menu.append(n)}),e.send()}),menu.addEventListener("click",function(e){var t,n=e.target;if(navigateTarget(n),e.target.classList.contains("menu__item"))t=e.target.children[1],getContent(t.dataset.id);else{if(!e.target.classList.contains("menu__text")||e.target.classList.contains("menu"))return;t=e.target.nextElementSibling,getContent(t.dataset.id)}if(!e.target.classList.contains("submenu__item")){Array.from(document.querySelectorAll(".submenu")).map(function(e){return e.classList.remove("submenu--show")});var a=26*t.children.length;document.documentElement.style.setProperty("--submenu-height",a+"px"),t.classList.add("submenu--show")}});var main=document.getElementById("main"),getContent=function(e){var t;(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("GET","/getContent/".concat(e)),t.addEventListener("load",function(e){var t=JSON.parse(e.target.response);main.innerHTML=t[0].text,inyectaStyle()}),t.send()},inyectaStyle=function(){var e=document.getElementById("inyeccion");if(e){e.parentNode.removeChild(e);var t=document.createElement("script");t.src="js/prism.js",t.id="inyeccion",document.body.appendChild(t)}else{var n=document.createElement("script");n.src="js/prism.js",n.id="inyeccion",document.body.appendChild(n)}},navigateTarget=function(t){if(t.classList.contains("submenu__item")){var e=Array.from(main.querySelectorAll("h2")).filter(function(e){return e.textContent.toLowerCase().startsWith(t.textContent.toLowerCase())})[0];scrollTo(0,e.offsetTop-110)}else scrollTo(0,-110)};getContent(1)}